<head>
    <link rel="manifest" href="manifest.json">
    <!-- 文字コード設定&モバイル対応化 -->
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
     <meta name="theme-color" content="#008b8b"/>
</head>
<main>
	<button id="installButton" class="btn btn-success d-none" style="display:none" type="button">
</main>
<style>
{
  "theme_color": "#008b8b"
  }
html {
  touch-action: manipulation;
    }
body {
background-color: #777799;
    }
</style>
<script>
    (function () {
	// ---------- serviceWorkerの使用
	if ('serviceWorker' in navigator) {
		window.addEventListener('load', () => {
			navigator.serviceWorker.register('sw.js');

		});
	}
	// ---------- アイコンをホーム画面に追加
	let deferredPrompt;
	window.addEventListener('beforeinstallprompt', (e) => {
		// ブラウザデフォルトの処理を抑制する
		event.preventDefault();
		// イベントを変数に保存する
		deferredPrompt = event;
		// インストールボタンを表示
		document.getElementById('installButton').classList.replace('d-none','d-block');

//		// ↓このコードは動かない。直接promptを呼べない。
//	e.prompt()
//		.then(res => console.log(res))
//		.catch(error => { console.log(`----> ${error}`) });
	});
	document.getElementById('installButton').addEventListener('click', async () => {
		// インストールボタンを非表示
		document.getElementById('installButton').classList.replace('d-block','d-none');
		// プロンプトを表示
		deferredPrompt.prompt();
		// ユーザー操作待ち
		const { outcome } = await deferredPrompt.userChoice;
		// deferredPromptをクリア
		deferredPrompt = null;
	});
	// ---------- インストール成功
	window.addEventListener('appinstalled', () => {
		// インストールボタンを非表示
		document.getElementById('installButton').classList.replace('d-block','d-none');
		// deferredPromptをクリア
		deferredPrompt = null;
	});
})()
    //バナーの代わりに表示するボタンを登録する
registerInstallAppEvent(document.getElementById("InstallBtn"));

//バナー表示をキャンセルし、代わりに表示するDOM要素を登録する関数
//引数１：イベントを登録するHTMLElement
function registerInstallAppEvent(elem){
  //インストールバナー表示条件満足時のイベントを乗っ取る
  window.addEventListener('beforeinstallprompt', function(event){
    console.log("beforeinstallprompt: ", event);
    event.preventDefault(); //バナー表示をキャンセル
    elem.promptEvent = event; //eventを保持しておく
    elem.style.display = "block"; //要素を表示する
    return false;
  });
  //インストールダイアログの表示処理
  function installApp() {
    if(elem.promptEvent){
      elem.promptEvent.prompt(); //ダイアログ表示
      elem.promptEvent.userChoice.then(function(choice){
        elem.style.display = "none";
        elem.promptEvent = null; //一度しか使えないため後始末
      });//end then
    }
  }//end installApp
  //ダイアログ表示を行うイベントを追加
  elem.addEventListener("click", installApp);
}//end registerInstallAppEvent

    const ham = document.querySelector('#js-hamburger');
const nav = document.querySelector('#js-nav');

ham.addEventListener('click', function () {

  ham.classList.toggle('active');
  nav.classList.toggle('active');

});
  /* ピッチインピッチアウトによる拡大縮小を禁止 */
  document.documentElement.addEventListener('touchstart', function (e) {
  if (e.touches.length >= 2) {e.preventDefault();}
  }, {passive: false});
  /* ダブルタップによる拡大を禁止 */
  var t = 0;
  document.documentElement.addEventListener('touchend', function (e) {
  var now = new Date().getTime();
  if ((now - t) < 350){
    e.preventDefault();
  }
  t = now;
  }, false);
$(function() {
    $('.hamburger').click(function() {
        $(this).toggleClass('active');
 
        if ($(this).hasClass('active')) {
            $('.globalMenuSp').addClass('active');
        } else {
            $('.globalMenuSp').removeClass('active');
        }
    });
});
</script>
<style>
  body , input , textarea , select {
  /* 入力欄にフォーカスが当たっても拡大しない */
    font-size:17px;
  }
</style>
